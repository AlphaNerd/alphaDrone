var Cylon = require('cylon');

Cylon.robot({
  connections:{
    leapmotion: {adaptor: 'leapmotion'},
    ardrone: {adaptor: 'ardrone', port: '192.168.1.1'}
  },

  devices: {
    leapmotion: {driver: 'leapmotion', connection: 'leapmotion'},
    drone: {driver: 'ardrone', connection: 'ardrone'},
    //nav: { driver: 'ardroneNav' }
  },
  work: function(my){
    // my.drone.config('general:navdata_demo', 'TRUE');
    // my.nav.on('update', function(data) {
    //   console.log(data);
    // }),
    my.leapmotion.on('hand', function(hand){
      if (hand.type === 'right'){
        if (hand.pitch() <= 0.25 && hand.pitch() >= -0.15){
          console.log("Hover");
          my.drone.hover();
        }else{
          my.drone.forward(hand.pitch());
          console.log(hand.pitch());
        }
        if (hand.roll() <= 0.1 && hand.roll() >= -0.1){
          console.log("No Turn");
          my.drone.hover();
        }else{
          console.log("Turn");
          my.drone.left(hand.roll());
        }
        if (hand.palmPosition[1] >= 150){
          console.log("takeoff");
          my.drone.takeoff();
        }else{
          console.log("land");
          my.drone.land();
        }
      }
    });
  }
}).start();

